<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns:xl="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="121 85 1295 810" width="1295" height="810">
  <defs>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="StickArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="black">
      <g>
        <path d="M 8 0 L 0 0 M 0 -3 L 8 0 L 0 3" fill="none" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
  </defs>
  <g id="版面____2" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none" fill="none">
    <title>改造方案2</title>
    <rect fill="white" x="121" y="85" width="1295" height="810"/>
    <g id="版面____2_图层_2">
      <title>图层 2</title>
      <g id="Graphic_13">
        <rect x="128" y="311" width="462" height="516.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(133 316)" fill="black">
          <tspan font-family="PingFang SC" font-weight="bold" font-size="14" fill="black" x="0" y="15">机房</tspan>
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="14" fill="black" y="15">1</tspan>
          <tspan font-family="PingFang SC" font-weight="bold" font-size="14" fill="black" y="15">（城市1）-生产环境</tspan>
        </text>
      </g>
      <g id="Graphic_15">
        <path d="M 141 562.5 L 577 562.5 L 577 804.5 L 141 804.5 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(146 567.5)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="14" fill="black" x="0" y="15">K8s</tspan>
          <tspan font-family="PingFang SC" font-weight="bold" font-size="14" fill="black" y="15">集群</tspan>
        </text>
      </g>
      <g id="Graphic_19">
        <rect x="1002" y="451" width="413" height="360.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(1007 456)" fill="black">
          <tspan font-family="PingFang SC" font-weight="bold" font-size="14" fill="black" x="0" y="15">机房</tspan>
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="14" fill="black" y="15">2</tspan>
          <tspan font-family="PingFang SC" font-weight="bold" font-size="14" fill="black" y="15">（城市2）-双活环境</tspan>
        </text>
      </g>
      <g id="Graphic_20">
        <path d="M 1015 483 L 1392 483 L 1392 788.5 L 1015 788.5 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(1020 488)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="14" fill="black" x="0" y="15">K8s</tspan>
          <tspan font-family="PingFang SC" font-weight="bold" font-size="14" fill="black" y="15">集群</tspan>
        </text>
      </g>
      <g id="Line_24">
        <line x1="1290.6667" y1="529.5" x2="1291.2427" y2="612.10025" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_88">
        <text transform="translate(126.875 845.2399)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="17">非双活部分，转发保持不变，需要双活的部分，使用单独的域名，分离出来。</tspan>
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="39">当时只有一个业务需要双活，所以单独申请一个域名</tspan>
        </text>
      </g>
      <g id="Graphic_89">
        <text transform="translate(126.875 90.44003)" fill="black">
          <tspan font-family="PingFang SC" font-size="21" fill="black" x="0" y="22">双活机房也添加入口F5，生产域名负载到两边机房的入口F5</tspan>
        </text>
      </g>
      <g id="Graphic_93">
        <path d="M 627 168 L 909 168 L 909 210.00507 L 627 210.00507 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(632 178.00253)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="44.248" y="17">域名：</tspan>
          <tspan font-family="Helvetica Neue" font-size="18" fill="black" y="17"> </tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" y="17">https://domain-prod</tspan>
        </text>
      </g>
      <g id="Line_95">
        <line x1="721" y1="210.00507" x2="435.7222" y2="486.45256" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_96">
        <line x1="815" y1="210.00507" x2="1204.9314" y2="373.91162" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_97">
        <line x1="414.25" y1="527.26015" x2="414.25" y2="569.6" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_98">
        <line x1="1232.4701" y1="405.5" x2="1232.3481" y2="487.1" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_99">
        <line x1="1174" y1="507.83333" x2="444.15" y2="507.2827" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_101">
        <text transform="translate(171.75 438.76014)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="17">所有业务组件流量都经过这里，</tspan>
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="39">包括有和没有双活流量的组件</tspan>
        </text>
      </g>
      <g id="Graphic_102">
        <text transform="translate(1007 827)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="17">这个集群只有双活流量，且只部署了需要双活的业务组件</tspan>
        </text>
      </g>
    </g>
    <g id="版面____2_Layer_1">
      <title>Layer 1</title>
      <g id="Line_3">
        <line x1="133" y1="274.5" x2="1199.3827" y2="274.5" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_4">
        <rect x="154" y="228.5" width="110.5" height="32.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(159 236.554)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="26.653" y="13">intranet</tspan>
        </text>
      </g>
      <g id="Graphic_6">
        <rect x="359" y="228.5" width="110.5" height="32.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(364 236.554)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="26.653" y="13">intranet</tspan>
        </text>
      </g>
      <g id="Graphic_11">
        <rect x="326.75" y="580" width="175" height="32.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(331.75 586.25)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="18.989" y="15">NGINX</tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" y="15">（入口网关）</tspan>
        </text>
      </g>
      <g id="Graphic_16">
        <rect x="326.75" y="638.5" width="175" height="32.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(331.75 646.554)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="16.651" y="13">springcloud-gateway</tspan>
        </text>
      </g>
      <g id="Line_17">
        <line x1="414.25" y1="613" x2="414.25" y2="628.1" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_22">
        <rect x="1203.9286" y="622.5" width="175" height="32.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1208.9286 630.554)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="16.651" y="13">springcloud-gateway</tspan>
        </text>
      </g>
      <g id="Graphic_23">
        <rect x="1174" y="497" width="175" height="32.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1179 503.25)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="18.989" y="15">NGINX</tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" y="15">（入口网关）</tspan>
        </text>
      </g>
      <g id="Graphic_32">
        <rect x="420.66047" y="713.4128" width="123.75" height="55.07555" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(425.66047 720.95055)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="28.875" y="15">需双活的</tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="28.875" y="35">业务服务</tspan>
        </text>
      </g>
      <g id="Graphic_31">
        <rect x="287.25" y="713.4128" width="119.75" height="55.07555" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(292.25 720.95055)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="19.875" y="15">无需双活的</tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="26.875" y="35">业务服务</tspan>
        </text>
      </g>
      <g id="Graphic_30">
        <rect x="149" y="655.5" width="122" height="39" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(154 655)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="14" y="15">前端静态资源</tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="41.272" y="35">NGX</tspan>
        </text>
      </g>
      <g id="Line_33">
        <line x1="427.43323" y1="671.3919" x2="454.26305" y2="705.2607" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_34">
        <line x1="401.2888" y1="671.3945" x2="374.9586" y2="705.2072" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_35">
        <path d="M 326.75 592.1667 L 210 592.1667 L 210 645.1" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_36">
        <rect x="1200.4286" y="687.4883" width="182" height="81" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1205.4286 717.9883)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="44" y="15">需双活的服务</tspan>
        </text>
      </g>
      <g id="Line_37">
        <line x1="1291.4286" y1="655.5" x2="1291.4286" y2="677.0883" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_38">
        <rect x="1021" y="622.5" width="122" height="39" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1026 622)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="14" y="15">前端静态资源</tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="41.272" y="35">NGX</tspan>
        </text>
      </g>
      <g id="Line_39">
        <path d="M 1174 518.66667 L 1082 518.66667 L 1082 612.1" marker-end="url(#StickArrow_Marker)" stroke="black" stroke-linecap="butt" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_42">
        <circle cx="414.25" cy="507.26014" r="19.500031159087" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(403.65 499.06414)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="2.6900004" y="13">F5</tspan>
        </text>
      </g>
      <g id="Graphic_55">
        <path d="M 740.75 725.025 L 740.75 663.225 C 740.75 658.9608 765.502 655.5 796 655.5 C 826.498 655.5 851.25 658.9608 851.25 663.225 L 851.25 725.025 C 851.25 729.2892 826.498 732.75 796 732.75 C 765.502 732.75 740.75 729.2892 740.75 725.025 M 740.75 663.225 C 740.75 667.4892 765.502 670.95 796 670.95 C 826.498 670.95 851.25 667.4892 851.25 663.225" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(745.75 687.9875)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="26.527" y="15">DB</tspan>
          <tspan font-family="PingFang SC" font-size="14" fill="black" y="15">公用</tspan>
        </text>
      </g>
      <g id="Graphic_57">
        <path d="M 621.875 691.625 L 632.875 667 L 632.875 679.3125 L 664.875 679.3125 L 664.875 667 L 675.875 691.625 L 664.875 716.25 L 664.875 703.9375 L 632.875 703.9375 L 632.875 716.25 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_58">
        <path d="M 889.625 691.625 L 900.625 667 L 900.625 679.3125 L 932.625 679.3125 L 932.625 667 L 943.625 691.625 L 932.625 716.25 L 932.625 703.9375 L 900.625 703.9375 L 900.625 716.25 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_59">
        <rect x="153.83953" y="700.45055" width="110.66047" height="97.54945" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(158.83953 705.45055)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="8.330235" y="15">各类基础组件</tspan>
        </text>
      </g>
      <g id="Graphic_61">
        <rect x="166.75" y="727.6667" width="85" height="24" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(171.75 729.6667)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="9.5" y="15">注册中心</tspan>
        </text>
      </g>
      <g id="Graphic_62">
        <rect x="166.75" y="754.1667" width="85" height="24" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(171.75 756.1667)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="9.5" y="15">配置中心</tspan>
        </text>
      </g>
      <g id="Graphic_63">
        <text transform="translate(171.75 771)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="17">…</tspan>
        </text>
      </g>
      <g id="Graphic_64">
        <rect x="1026.6698" y="684.45055" width="110.66047" height="97.54945" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1031.6698 689.45055)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="8.330235" y="15">各类基础组件</tspan>
        </text>
      </g>
      <g id="Graphic_65">
        <rect x="1039.5802" y="711.6667" width="85" height="24" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1044.5802 713.6667)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="9.5" y="15">注册中心</tspan>
        </text>
      </g>
      <g id="Graphic_66">
        <rect x="1039.5802" y="738.1667" width="85" height="24" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1044.5802 740.1667)" fill="black">
          <tspan font-family="PingFang SC" font-size="14" fill="black" x="9.5" y="15">配置中心</tspan>
        </text>
      </g>
      <g id="Graphic_67">
        <text transform="translate(1044.5802 755)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="17">…</tspan>
        </text>
      </g>
      <g id="Graphic_68">
        <text transform="translate(260.902 496.26014)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="17">vip： 192.168.10.1</tspan>
        </text>
      </g>
      <g id="Graphic_90">
        <circle cx="1232.5" cy="385.5" r="19.5000311590869" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1221.9 377.304)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="2.6900004" y="13">F5</tspan>
        </text>
      </g>
      <g id="Graphic_92">
        <text transform="translate(1250.652 374.5)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" fill="black" x="0" y="17">vip： 192.168.11.2</tspan>
        </text>
      </g>
      <g id="Graphic_100">
        <rect x="731" y="228.5" width="110.5" height="32.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(736 236.554)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="14" fill="black" x="26.653" y="13">intranet</tspan>
        </text>
      </g>
    </g>
  </g>
</svg>
